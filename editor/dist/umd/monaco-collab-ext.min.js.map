{"version":3,"file":"monaco-collab-ext.min.js","sources":["monaco-collab-ext.js"],"sourcesContent":["/**!\nÂ© 2019 Convergence Labs, Inc.\n@version 0.3.2\n@license MIT\n*/\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"monaco-editor\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MonacoCollabExt\", [\"vs/editor/editor.main\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MonacoCollabExt\"] = factory(require(\"monaco-editor\"));\n\telse\n\t\troot[\"MonacoCollabExt\"] = factory(root[\"monaco\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__643__) => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 22:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EditorContentManager = void 0;\nconst monaco = __importStar(__webpack_require__(643));\nconst Validation_1 = __webpack_require__(422);\n/**\n * The EditorContentManager facilitates listening to local content changes and\n * the playback of remote content changes into the editor.\n */\nclass EditorContentManager {\n    /**\n     * Constructs a new EditorContentManager using the supplied options.\n     *\n     * @param options\n     *   The options that configure the EditorContentManager.\n     */\n    constructor(options) {\n        /**\n         * A helper method to process local changes from Monaco.\n         *\n         * @param e\n         *   The event to process.\n         * @private\n         * @internal\n         */\n        this._onContentChanged = (e) => {\n            if (!this._suppress) {\n                e.changes.forEach((change) => this._processChange(change));\n            }\n        };\n        this._options = Object.assign(Object.assign({}, EditorContentManager._DEFAULTS), options);\n        Validation_1.Validation.assertDefined(this._options, \"options\");\n        Validation_1.Validation.assertDefined(this._options.editor, \"options.editor\");\n        Validation_1.Validation.assertFunction(this._options.onInsert, \"options.onInsert\");\n        Validation_1.Validation.assertFunction(this._options.onReplace, \"options.onReplace\");\n        Validation_1.Validation.assertFunction(this._options.onDelete, \"options.onDelete\");\n        this._disposer = this._options.editor.onDidChangeModelContent(this._onContentChanged);\n    }\n    /**\n     * Inserts text into the editor.\n     *\n     * @param index\n     *   The index to insert text at.\n     * @param text\n     *   The text to insert.\n     */\n    insert(index, text) {\n        this._suppress = true;\n        const { editor: ed, remoteSourceId } = this._options;\n        const position = ed.getModel().getPositionAt(index);\n        ed.executeEdits(remoteSourceId, [{\n                range: new monaco.Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                text,\n                forceMoveMarkers: true\n            }]);\n        this._suppress = false;\n    }\n    /**\n     * Replaces text in the editor.\n     *\n     * @param index\n     *   The start index of the range to replace.\n     * @param length\n     *   The length of the  range to replace.\n     * @param text\n     *   The text to insert.\n     */\n    replace(index, length, text) {\n        this._suppress = true;\n        const { editor: ed, remoteSourceId } = this._options;\n        const start = ed.getModel().getPositionAt(index);\n        const end = ed.getModel().getPositionAt(index + length);\n        ed.executeEdits(remoteSourceId, [{\n                range: new monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column),\n                text,\n                forceMoveMarkers: true\n            }]);\n        this._suppress = false;\n    }\n    /**\n     * Deletes text in the editor.\n     *\n     * @param index\n     *   The start index of the range to remove.\n     * @param length\n     *   The length of the  range to remove.\n     */\n    delete(index, length) {\n        this._suppress = true;\n        const { editor: ed, remoteSourceId } = this._options;\n        const start = ed.getModel().getPositionAt(index);\n        const end = ed.getModel().getPositionAt(index + length);\n        ed.executeEdits(remoteSourceId, [{\n                range: new monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column),\n                text: \"\",\n                forceMoveMarkers: true\n            }]);\n        this._suppress = false;\n    }\n    /**\n     * Disposes of the content manager, freeing any resources.\n     */\n    dispose() {\n        this._disposer.dispose();\n    }\n    /**\n     * A helper method to process a single content change.\n     *\n     * @param change\n     *   The change to process.\n     * @private\n     * @internal\n     */\n    _processChange(change) {\n        Validation_1.Validation.assertDefined(change, \"change\");\n        const { rangeOffset, rangeLength, text } = change;\n        if (text.length > 0 && rangeLength === 0) {\n            this._options.onInsert(rangeOffset, text);\n        }\n        else if (text.length > 0 && rangeLength > 0) {\n            this._options.onReplace(rangeOffset, rangeLength, text);\n        }\n        else if (text.length === 0 && rangeLength > 0) {\n            this._options.onDelete(rangeOffset, rangeLength);\n        }\n        else {\n            throw new Error(\"Unexpected change: \" + JSON.stringify(change));\n        }\n    }\n}\nexports.EditorContentManager = EditorContentManager;\n/**\n * Option defaults.\n *\n * @internal\n */\nEditorContentManager._DEFAULTS = {\n    onInsert: () => {\n        // no-op\n    },\n    onReplace: () => {\n        // no-op\n    },\n    onDelete: () => {\n        // no-op\n    },\n    remoteSourceId: \"remote\"\n};\n\n\n/***/ }),\n\n/***/ 741:\n/***/ ((__unused_webpack_module, exports) => {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RemoteCursor = void 0;\n/**\n * The RemoteCursor class represents a remote cursor in the MonacoEditor. This\n * class allows you to control the location and visibility of the cursor.\n */\nclass RemoteCursor {\n    /**\n     * Creates a new RemoteCursor.\n     *\n     * @param delegate\n     *   The underlying Monaco Editor widget.\n     * @internal\n     * @hidden\n     */\n    constructor(delegate) {\n        this._delegate = delegate;\n    }\n    /**\n     * Gets the unique id of this cursor.\n     *\n     * @returns\n     *   The unique id of this cursor.\n     */\n    getId() {\n        return this._delegate.getId();\n    }\n    /**\n     * Gets the position of the cursor.\n     *\n     * @returns\n     *   The position of the cursor.\n     */\n    getPosition() {\n        return this._delegate.getPosition().position;\n    }\n    /**\n     * Sets the location of the cursor based on a Monaco Editor IPosition.\n     *\n     * @param position\n     *   The line / column position of the cursor.\n     */\n    setPosition(position) {\n        this._delegate.setPosition(position);\n    }\n    /**\n     * Sets the location of the cursor using a zero-based text offset.\n     *\n     * @param offset\n     *   The offset of the cursor.\n     */\n    setOffset(offset) {\n        this._delegate.setOffset(offset);\n    }\n    /**\n     * Shows the cursor if it is hidden.\n     */\n    show() {\n        this._delegate.show();\n    }\n    /**\n     * Hides the cursor if it is shown.\n     */\n    hide() {\n        this._delegate.hide();\n    }\n    /**\n     * Determines if the cursor has already been disposed. A cursor is disposed\n     * when it has been permanently removed from the editor.\n     *\n     * @returns\n     *   True if the cursor has been disposed, false otherwise.\n     */\n    isDisposed() {\n        return this._delegate.isDisposed();\n    }\n    /**\n     * Disposes of this cursor, removing it from the editor.\n     */\n    dispose() {\n        this._delegate.dispose();\n    }\n}\nexports.RemoteCursor = RemoteCursor;\n\n\n/***/ }),\n\n/***/ 423:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RemoteCursorManager = void 0;\nconst RemoteCursor_1 = __webpack_require__(741);\nconst RemoteCursorWidget_1 = __webpack_require__(282);\nconst Validation_1 = __webpack_require__(422);\n/**\n * The RemoteCursorManager class is responsible for creating and managing a\n * set of indicators that show where remote users's cursors are located when\n * using Monaco in a collaborative editing context.  The RemoteCursorManager\n * leverages Monaco's Content Widget concept.\n */\nclass RemoteCursorManager {\n    /**\n     * Creates a new RemoteCursorManager with the supplied options.\n     *\n     * @param options\n     *   The options that will configure the RemoteCursorManager behavior.\n     */\n    constructor(options) {\n        if (typeof options !== \"object\") {\n            throw new Error(\"'options' is a required parameter and must be an object.\");\n        }\n        // Override the defaults.\n        options = Object.assign(Object.assign({}, RemoteCursorManager.DEFAULT_OPTIONS), options);\n        if (options.editor === undefined || options.editor === null) {\n            throw new Error(`options.editor must be defined but was: ${options.editor}`);\n        }\n        this._options = options;\n        this._cursorWidgets = new Map();\n        this._nextWidgetId = 0;\n    }\n    /**\n     * Adds a new remote cursor to the editor.\n     *\n     * @param id\n     *   A unique id that will be used to reference this cursor.\n     * @param color\n     *   The css color that the cursor and tooltip should be rendered in.\n     * @param label\n     *   An optional label for the tooltip. If tooltips are enabled.\n     *\n     * @returns\n     *   The remote cursor widget that will be added to the editor.\n     */\n    addCursor(id, color, label) {\n        Validation_1.Validation.assertString(id, \"id\");\n        Validation_1.Validation.assertString(color, \"color\");\n        if (this._options.tooltips && typeof \"label\" !== \"string\") {}\n        const widgetId = \"\" + this._nextWidgetId++;\n        const tooltipDurationMs = this._options.tooltipDuration * 1000;\n        const cursorWidget = new RemoteCursorWidget_1.RemoteCursorWidget(this._options.editor, widgetId, color, label, this._options.tooltips, tooltipDurationMs, () => this.removeCursor(id));\n        this._cursorWidgets.set(id, cursorWidget);\n        return new RemoteCursor_1.RemoteCursor(cursorWidget);\n    }\n    /**\n     * Removes the remote cursor from the editor.\n     *\n     * @param id\n     *   The unique id of the cursor to remove.\n     */\n    removeCursor(id) {\n        Validation_1.Validation.assertString(id, \"id\");\n        const remoteCursorWidget = this._getCursor(id);\n        if (!remoteCursorWidget.isDisposed()) {\n            remoteCursorWidget.dispose();\n        }\n        this._cursorWidgets.delete(id);\n    }\n    /**\n     * Updates the location of the specified remote cursor using a Monaco\n     * IPosition object..\n     *\n     * @param id\n     *   The unique id of the cursor to remove.\n     * @param position\n     *   The location of the cursor to set.\n     */\n    setCursorPosition(id, position) {\n        Validation_1.Validation.assertString(id, \"id\");\n        const remoteCursorWidget = this._getCursor(id);\n        remoteCursorWidget.setPosition(position);\n    }\n    /**\n     * Updates the location of the specified remote cursor based on a zero-based\n     * text offset.\n     *\n     * @param id\n     *   The unique id of the cursor to remove.\n     * @param offset\n     *   The location of the cursor to set.\n     */\n    setCursorOffset(id, offset) {\n        Validation_1.Validation.assertString(id, \"id\");\n        const remoteCursorWidget = this._getCursor(id);\n        remoteCursorWidget.setOffset(offset);\n    }\n    /**\n     * Shows the specified cursor. Note the cursor may be scrolled out of view.\n     *\n     * @param id\n     *   The unique id of the cursor to show.\n     */\n    showCursor(id) {\n        Validation_1.Validation.assertString(id, \"id\");\n        const remoteCursorWidget = this._getCursor(id);\n        remoteCursorWidget.show();\n    }\n    /**\n     * Hides the specified cursor.\n     *\n     * @param id\n     *   The unique id of the cursor to show.\n     */\n    hideCursor(id) {\n        Validation_1.Validation.assertString(id, \"id\");\n        const remoteCursorWidget = this._getCursor(id);\n        remoteCursorWidget.hide();\n    }\n    /**\n     * A helper method that gets a cursor by id, or throws an exception.\n     * @internal\n     */\n    _getCursor(id) {\n        if (!this._cursorWidgets.has(id)) {\n            throw new Error(\"No such cursor: \" + id);\n        }\n        return this._cursorWidgets.get(id);\n    }\n}\nexports.RemoteCursorManager = RemoteCursorManager;\n/**\n * The default values for optional parameters.\n * @internal\n */\nRemoteCursorManager.DEFAULT_OPTIONS = { tooltips: true, tooltipDuration: 1 };\n\n\n/***/ }),\n\n/***/ 282:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RemoteCursorWidget = void 0;\nconst monaco_editor_1 = __webpack_require__(643);\nconst EditorContentManager_1 = __webpack_require__(22);\nconst Validation_1 = __webpack_require__(422);\nfunction getConfiguration(editorInstance) {\n    // Support for Monaco < 0.19.0\n    if (typeof editorInstance.getConfiguration === \"function\") {\n        return editorInstance.getConfiguration();\n    }\n    return {\n        lineHeight: editorInstance.getOption(monaco_editor_1.editor.EditorOption.lineHeight)\n    };\n}\n/**\n * This class implements a Monaco Content Widget to render a remote user's\n * cursor, and an optional tooltip.\n *\n * @internal\n */\nclass RemoteCursorWidget {\n    constructor(codeEditor, widgetId, color, label, tooltipEnabled, tooltipDuration, onDisposed) {\n        this._onInsert = (index, text) => {\n            if (this._position === null) {\n                return;\n            }\n            const offset = this._offset;\n            if (index <= offset) {\n                const newOffset = offset + text.length;\n                const position = this._editor.getModel().getPositionAt(newOffset);\n                this._updatePosition(position);\n            }\n        };\n        this._onReplace = (index, length, text) => {\n            if (this._position === null) {\n                return;\n            }\n            const offset = this._offset;\n            if (index <= offset) {\n                const newOffset = (offset - Math.min(offset - index, length)) + text.length;\n                const position = this._editor.getModel().getPositionAt(newOffset);\n                this._updatePosition(position);\n            }\n        };\n        this._onDelete = (index, length) => {\n            if (this._position === null) {\n                return;\n            }\n            const offset = this._offset;\n            if (index <= offset) {\n                const newOffset = offset - Math.min(offset - index, length);\n                const position = this._editor.getModel().getPositionAt(newOffset);\n                this._updatePosition(position);\n            }\n        };\n        this._editor = codeEditor;\n        this._tooltipDuration = tooltipDuration;\n        this._id = `monaco-remote-cursor-${widgetId}`;\n        this._onDisposed = onDisposed;\n        // Create the main node for the cursor element.\n        const { lineHeight } = getConfiguration(this._editor);\n        this._domNode = document.createElement(\"div\");\n        this._domNode.className = \"monaco-remote-cursor\";\n        this._domNode.style.background = color;\n        this._domNode.style.height = `${lineHeight}px`;\n        // Create the tooltip element if the tooltip is enabled.\n        if (tooltipEnabled) {\n            this._tooltipNode = document.createElement(\"div\");\n            this._tooltipNode.className = \"monaco-remote-cursor-tooltip\";\n            this._tooltipNode.style.background = color;\n            this._tooltipNode.innerHTML = label;\n            this._domNode.appendChild(this._tooltipNode);\n            // we only need to listen to scroll positions to update the\n            // tooltip location on scrolling.\n            this._scrollListener = this._editor.onDidScrollChange(() => {\n                this._updateTooltipPosition();\n            });\n        }\n        else {\n            this._tooltipNode = null;\n            this._scrollListener = null;\n        }\n        this._contentManager = new EditorContentManager_1.EditorContentManager({\n            editor: this._editor,\n            onInsert: this._onInsert,\n            onReplace: this._onReplace,\n            onDelete: this._onDelete\n        });\n        this._hideTimer = null;\n        this._editor.addContentWidget(this);\n        this._offset = -1;\n        this._disposed = false;\n    }\n    hide() {\n        this._domNode.style.display = \"none\";\n    }\n    show() {\n        this._domNode.style.display = \"inherit\";\n    }\n    setOffset(offset) {\n        Validation_1.Validation.assertNumber(offset, \"offset\");\n        const position = this._editor.getModel().getPositionAt(offset);\n        this.setPosition(position);\n    }\n    setPosition(position) {\n        Validation_1.Validation.assertPosition(position, \"position\");\n        this._updatePosition(position);\n        if (this._tooltipNode !== null) {\n            setTimeout(() => this._showTooltip(), 0);\n        }\n    }\n    isDisposed() {\n        return this._disposed;\n    }\n    dispose() {\n        if (this._disposed) {\n            return;\n        }\n        this._editor.removeContentWidget(this);\n        if (this._scrollListener !== null) {\n            this._scrollListener.dispose();\n        }\n        this._contentManager.dispose();\n        this._disposed = true;\n        this._onDisposed();\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._position;\n    }\n    _updatePosition(position) {\n        this._position = {\n            position: Object.assign({}, position),\n            preference: [monaco_editor_1.editor.ContentWidgetPositionPreference.EXACT]\n        };\n        this._offset = this._editor.getModel().getOffsetAt(position);\n        this._editor.layoutContentWidget(this);\n    }\n    _showTooltip() {\n        this._updateTooltipPosition();\n        if (this._hideTimer !== null) {\n            clearTimeout(this._hideTimer);\n        }\n        else {\n            this._setTooltipVisible(true);\n        }\n        this._hideTimer = setTimeout(() => {\n            this._setTooltipVisible(false);\n            this._hideTimer = null;\n        }, this._tooltipDuration);\n    }\n    _updateTooltipPosition() {\n        const distanceFromTop = this._domNode.offsetTop - this._editor.getScrollTop();\n        if (distanceFromTop - this._tooltipNode.offsetHeight < 5) {\n            this._tooltipNode.style.top = `${this._tooltipNode.offsetHeight + 2}px`;\n        }\n        else {\n            this._tooltipNode.style.top = `-${this._tooltipNode.offsetHeight}px`;\n        }\n        this._tooltipNode.style.left = \"0\";\n    }\n    _setTooltipVisible(visible) {\n        if (visible) {\n            this._tooltipNode.style.opacity = \"1.0\";\n        }\n        else {\n            this._tooltipNode.style.opacity = \"0\";\n        }\n    }\n}\nexports.RemoteCursorWidget = RemoteCursorWidget;\n\n\n/***/ }),\n\n/***/ 321:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RemoteSelection = void 0;\nconst monaco = __importStar(__webpack_require__(643));\nconst Validation_1 = __webpack_require__(422);\nclass RemoteSelection {\n    /**\n     * Constructs a new remote selection.\n     *\n     * @internal\n     */\n    constructor(codeEditor, id, classId, color, label, onDisposed) {\n        this._editor = codeEditor;\n        this._id = id;\n        const uniqueClassId = `monaco-remote-selection-${classId}`;\n        this._className = `monaco-remote-selection ${uniqueClassId}`;\n        this._styleElement = RemoteSelection._addDynamicStyleElement(uniqueClassId, color);\n        this._label = label;\n        this._decorations = [];\n        this._onDisposed = onDisposed;\n    }\n    /**\n     * A helper method to add a style tag to the head of the document that will\n     * style the color of the selection. The Monaco Editor only allows setting\n     * the class name of decorations, so we can not set a style property directly.\n     * This method will create, add, and return the style tag for this element.\n     *\n     * @param className\n     *   The className to use as the css selector.\n     * @param color\n     *   The color to set for the selection.\n     * @returns\n     *   The style element that was added to the document head.\n     *\n     * @private\n     * @internal\n     */\n    static _addDynamicStyleElement(className, color) {\n        Validation_1.Validation.assertString(className, \"className\");\n        Validation_1.Validation.assertString(color, \"color\");\n        const css = `.${className} {\n         background-color: ${color};\n       }`.trim();\n        const styleElement = document.createElement(\"style\");\n        styleElement.innerText = css;\n        document.head.appendChild(styleElement);\n        return styleElement;\n    }\n    /**\n     * A helper method to ensure the start position is before the end position.\n     *\n     * @param start\n     *   The current start position.\n     * @param end\n     *   The current end position.\n     * @return\n     *   An object containing the correctly ordered start and end positions.\n     *\n     * @private\n     * @internal\n     */\n    static _swapIfNeeded(start, end) {\n        if (start.lineNumber < end.lineNumber || (start.lineNumber === end.lineNumber && start.column <= end.column)) {\n            return { start, end };\n        }\n        else {\n            return { start: end, end: start };\n        }\n    }\n    /**\n     * Gets the userland id of this selection.\n     */\n    getId() {\n        return this._id;\n    }\n    /**\n     * Gets the start position of the selection.\n     *\n     * @returns\n     *   The start position of the selection.\n     */\n    getStartPosition() {\n        return Object.assign({}, this._startPosition);\n    }\n    /**\n     * Gets the start position of the selection.\n     *\n     * @returns\n     *   The start position of the selection.\n     */\n    getEndPosition() {\n        return Object.assign({}, this._endPosition);\n    }\n    /**\n     * Sets the selection using zero-based text indices.\n     *\n     * @param start\n     *   The start offset to set the selection to.\n     * @param end\n     *   The end offset to set the selection to.\n     */\n    setOffsets(start, end) {\n        const startPosition = this._editor.getModel().getPositionAt(start);\n        const endPosition = this._editor.getModel().getPositionAt(end);\n        this.setPositions(startPosition, endPosition);\n    }\n    /**\n     * Sets the selection using Monaco's line-number / column coordinate system.\n     *\n     * @param start\n     *   The start position to set the selection to.\n     * @param end\n     *   The end position to set the selection to.\n     */\n    setPositions(start, end) {\n        // this._decorations = this._editor.deltaDecorations(this._decorations, []);\n        const ordered = RemoteSelection._swapIfNeeded(start, end);\n        this._startPosition = ordered.start;\n        this._endPosition = ordered.end;\n        this._render();\n    }\n    /**\n     * Makes the selection visible if it is hidden.\n     */\n    show() {\n        this._render();\n    }\n    /**\n     * Makes the selection hidden if it is visible.\n     */\n    hide() {\n        this._decorations = this._editor.deltaDecorations(this._decorations, []);\n    }\n    /**\n     * Determines if the selection has been permanently removed from the editor.\n     *\n     * @returns\n     *   True if the selection has been disposed, false otherwise.\n     */\n    isDisposed() {\n        return this._disposed;\n    }\n    /**\n     * Permanently removes the selection from the editor.\n     */\n    dispose() {\n        if (!this._disposed) {\n            this._styleElement.parentElement.removeChild(this._styleElement);\n            this.hide();\n            this._disposed = true;\n            this._onDisposed();\n        }\n    }\n    /**\n     * A helper method that actually renders the selection as a decoration within\n     * the Monaco Editor.\n     *\n     * @private\n     * @internal\n     */\n    _render() {\n        this._decorations = this._editor.deltaDecorations(this._decorations, [\n            {\n                range: new monaco.Range(this._startPosition.lineNumber, this._startPosition.column, this._endPosition.lineNumber, this._endPosition.column),\n                options: {\n                    className: this._className,\n                    hoverMessage: this._label != null ? {\n                        value: this._label\n                    } : null\n                }\n            }\n        ]);\n    }\n}\nexports.RemoteSelection = RemoteSelection;\n\n\n/***/ }),\n\n/***/ 193:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RemoteSelectionManager = void 0;\nconst RemoteSelection_1 = __webpack_require__(321);\nconst Validation_1 = __webpack_require__(422);\n/**\n * The RemoteSelectionManager renders remote users selections into the Monaco\n * editor using the editor's built-in decorators mechanism.\n */\nclass RemoteSelectionManager {\n    /**\n     * Creates a new RemoteSelectionManager with the specified options.\n     *\n     * @param options\n     *   Ths options that configure the RemoteSelectionManager.\n     */\n    constructor(options) {\n        Validation_1.Validation.assertDefined(options, \"options\");\n        this._remoteSelections = new Map();\n        this._options = options;\n        this._nextClassId = 0;\n    }\n    /**\n     * Adds a new remote selection with a unique id and the specified color.\n     *\n     * @param id\n     *   The unique id of the selection.\n     * @param color\n     *   The color to render the selection with.\n     */\n    addSelection(id, color, label) {\n        const onDisposed = () => {\n            this.removeSelection(id);\n        };\n        const selection = new RemoteSelection_1.RemoteSelection(this._options.editor, id, this._nextClassId++, color, label, onDisposed);\n        this._remoteSelections.set(id, selection);\n        return selection;\n    }\n    /**\n     * Removes an existing remote selection from the editor.\n     *\n     * @param id\n     *   The unique id of the selection.\n     */\n    removeSelection(id) {\n        const remoteSelection = this._getSelection(id);\n        if (!remoteSelection.isDisposed()) {\n            remoteSelection.dispose();\n        }\n    }\n    /**\n     * Sets the selection using zero-based text offset locations.\n     *\n     * @param id\n     *   The unique id of the selection.\n     * @param start\n     *   The starting offset of the selection.\n     * @param end\n     *   The ending offset of the selection.\n     */\n    setSelectionOffsets(id, start, end) {\n        const remoteSelection = this._getSelection(id);\n        remoteSelection.setOffsets(start, end);\n    }\n    /**\n     * Sets the selection using the Monaco Editor's IPosition (line numbers and columns)\n     * location concept.\n     *\n     * @param id\n     *   The unique id of the selection.\n     * @param start\n     *   The starting position of the selection.\n     * @param end\n     *   The ending position of the selection.\n     */\n    setSelectionPositions(id, start, end) {\n        const remoteSelection = this._getSelection(id);\n        remoteSelection.setPositions(start, end);\n    }\n    /**\n     * Shows the specified selection, if it is currently hidden.\n     *\n     * @param id\n     *   The unique id of the selection.\n     */\n    showSelection(id) {\n        const remoteSelection = this._getSelection(id);\n        remoteSelection.show();\n    }\n    /**\n     * Hides the specified selection, if it is currently shown.\n     *\n     * @param id\n     *   The unique id of the selection.\n     */\n    hideSelection(id) {\n        const remoteSelection = this._getSelection(id);\n        remoteSelection.hide();\n    }\n    /**\n     * A helper method that gets a cursor by id, or throws an exception.\n     * @internal\n     */\n    _getSelection(id) {\n        if (!this._remoteSelections.has(id)) {\n            throw new Error(\"No such selection: \" + id);\n        }\n        return this._remoteSelections.get(id);\n    }\n}\nexports.RemoteSelectionManager = RemoteSelectionManager;\n\n\n/***/ }),\n\n/***/ 422:\n/***/ ((__unused_webpack_module, exports) => {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Validation = void 0;\n/**\n * A helper class to aid in input validation.\n *\n * @internal\n */\nclass Validation {\n    static assertString(val, name) {\n        if (typeof val !== \"string\") {\n            throw new Error(`${name} must be a string but was: ${val}`);\n        }\n    }\n    static assertNumber(val, name) {\n        if (typeof val !== \"number\") {\n            throw new Error(`${name} must be a number but was: ${val}`);\n        }\n    }\n    static assertDefined(val, name) {\n        if (val === undefined || val === null) {\n            throw new Error(`${name} must be a defined but was: ${val}`);\n        }\n    }\n    static assertFunction(val, name) {\n        if (typeof val !== \"function\") {\n            throw new Error(`${name} must be a function but was: ${typeof val}`);\n        }\n    }\n    static assertPosition(val, name) {\n        Validation.assertDefined(val, name);\n        if (typeof val.lineNumber !== \"number\" || typeof val.column !== \"number\") {\n            throw new Error(`${name} must be an Object like {lineNumber: number, column: number}: ${JSON.stringify(val)}`);\n        }\n    }\n}\nexports.Validation = Validation;\n\n\n/***/ }),\n\n/***/ 294:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\n/*\n * Copyright (c) 2019 Convergence Labs, Inc.\n *\n * This file is part of the Monaco Collaborative Extensions, which is\n * released under the terms of the MIT license. A copy of the MIT license\n * is usually provided as part of this source code package in the LICENCE\n * file. If it was not, please see <https://opensource.org/licenses/MIT>\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n__exportStar(__webpack_require__(423), exports);\n__exportStar(__webpack_require__(193), exports);\n__exportStar(__webpack_require__(22), exports);\n\n\n/***/ }),\n\n/***/ 643:\n/***/ ((module) => {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__643__;\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(294);\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"names":["root","factory","exports","module","require","define","amd","self","__webpack_modules__","22","__unused_webpack_module","__webpack_require__","__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","EditorContentManager","monaco","Validation_1","constructor","options","_onContentChanged","_suppress","e","changes","forEach","_processChange","change","_options","assign","_DEFAULTS","Validation","assertDefined","editor","assertFunction","onInsert","onReplace","onDelete","_disposer","onDidChangeModelContent","insert","index","text","ed","remoteSourceId","position","getModel","getPositionAt","executeEdits","range","Range","lineNumber","column","forceMoveMarkers","replace","length","start","end","delete","dispose","rangeOffset","rangeLength","Error","JSON","stringify","741","RemoteCursor","delegate","_delegate","getId","getPosition","setPosition","setOffset","offset","show","hide","isDisposed","423","RemoteCursorManager","RemoteCursor_1","RemoteCursorWidget_1","DEFAULT_OPTIONS","_cursorWidgets","Map","_nextWidgetId","addCursor","id","color","label","assertString","tooltips","widgetId","tooltipDurationMs","tooltipDuration","cursorWidget","RemoteCursorWidget","removeCursor","set","remoteCursorWidget","_getCursor","setCursorPosition","setCursorOffset","showCursor","hideCursor","has","282","monaco_editor_1","EditorContentManager_1","codeEditor","tooltipEnabled","onDisposed","_onInsert","_position","_offset","newOffset","_editor","_updatePosition","_onReplace","Math","min","_onDelete","_tooltipDuration","_id","_onDisposed","lineHeight","editorInstance","getConfiguration","getOption","EditorOption","_domNode","document","createElement","className","style","background","height","_tooltipNode","innerHTML","appendChild","_scrollListener","onDidScrollChange","_updateTooltipPosition","_contentManager","_hideTimer","addContentWidget","_disposed","display","assertNumber","assertPosition","setTimeout","_showTooltip","removeContentWidget","getDomNode","preference","ContentWidgetPositionPreference","EXACT","getOffsetAt","layoutContentWidget","clearTimeout","_setTooltipVisible","offsetTop","getScrollTop","offsetHeight","top","left","visible","opacity","321","RemoteSelection","classId","uniqueClassId","_className","_styleElement","_addDynamicStyleElement","_label","_decorations","css","trim","styleElement","innerText","head","_swapIfNeeded","getStartPosition","_startPosition","getEndPosition","_endPosition","setOffsets","startPosition","endPosition","setPositions","ordered","_render","deltaDecorations","parentElement","removeChild","hoverMessage","193","RemoteSelectionManager","RemoteSelection_1","_remoteSelections","_nextClassId","addSelection","selection","removeSelection","remoteSelection","_getSelection","setSelectionOffsets","setSelectionPositions","showSelection","hideSelection","422","val","name","294","__exportStar","p","643","__WEBPACK_EXTERNAL_MODULE__643__","__webpack_module_cache__","moduleId","cachedModule"],"mappings":";;;;;CAKA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,kBACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,kBAAmB,CAAC,yBAA0BJ,GAC3B,iBAAZC,QACdA,QAAyB,gBAAID,EAAQG,QAAQ,kBAE7CJ,EAAsB,gBAAIC,EAAQD,EAAa,QARjD,CASGO,KAAM,IACO,kBAEN,IAAIC,EAAsB,CAE9BC,GACA,SAAUC,EAAyBR,EAASS,GAWlD,IAAIC,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B,IAAIG,EAAOP,OAAOQ,yBAAyBL,EAAGC,GACzCG,IAAS,QAASA,EAAQJ,EAAEM,YAAaF,EAAKG,WAAYH,EAAKI,gBAClEJ,EAAO,CAAEK,YAAY,EAAMC,IAAK,WAAa,OAAOV,EAAEC,MAExDJ,OAAOc,eAAeZ,EAAGG,EAAIE,IAC5B,SAAUL,EAAGC,EAAGC,EAAGC,GAEpBH,EADsBG,OAAXC,IAAPD,EAAuBD,EACzBC,GAAMF,EAAEC,KAEVW,EAAsBhB,MAAQA,KAAKgB,qBAAwBf,OAAOC,OAAS,SAAUC,EAAGc,GACxFhB,OAAOc,eAAeZ,EAAG,UAAW,CAAEU,YAAY,EAAMK,MAAOD,KAC9D,SAASd,EAAGc,GACbd,EAAW,QAAIc,IAEfE,EAAgBnB,MAAQA,KAAKmB,cAAiB,SAAUC,GACxD,GAAIA,GAAOA,EAAIV,WAAY,OAAOU,EAClC,IAAIC,EAAS,GACb,GAAW,MAAPD,EAAa,IAAK,IAAIf,KAAKe,EAAe,YAANf,GAAmBJ,OAAOqB,UAAUC,eAAeC,KAAKJ,EAAKf,IAAIN,EAAgBsB,EAAQD,EAAKf,GAEtI,OADAW,EAAmBK,EAAQD,GACpBC,GAEXpB,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQoC,0BAAuB,EAC/B,MAAMC,EAASP,EAAarB,EAAoB,MAC1C6B,EAAe7B,EAAoB,WAKnC2B,EAOFG,YAAYC,GASR7B,KAAK8B,kBAAoB,IAChB9B,KAAK+B,WACNC,EAAEC,QAAQC,QAAQ,GAAYlC,KAAKmC,eAAeC,KAG1DpC,KAAKqC,SAAWpC,OAAOqC,OAAOrC,OAAOqC,OAAO,GAAIb,EAAqBc,WAAYV,GACjFF,EAAaa,WAAWC,cAAczC,KAAKqC,SAAU,WACrDV,EAAaa,WAAWC,cAAczC,KAAKqC,SAASK,OAAQ,kBAC5Df,EAAaa,WAAWG,eAAe3C,KAAKqC,SAASO,SAAU,oBAC/DjB,EAAaa,WAAWG,eAAe3C,KAAKqC,SAASQ,UAAW,qBAChElB,EAAaa,WAAWG,eAAe3C,KAAKqC,SAASS,SAAU,oBAC/D9C,KAAK+C,UAAY/C,KAAKqC,SAASK,OAAOM,wBAAwBhD,KAAK8B,mBAUvEmB,OAAOC,EAAOC,GACVnD,KAAK+B,WAAY,EACjB,KAAM,CAAEW,OAAQU,EAAIC,eAAAA,GAAmBrD,KAAKqC,SACtCiB,EAAWF,EAAGG,WAAWC,cAAcN,GAC7CE,EAAGK,aAAaJ,EAAgB,CAAC,CACzBK,MAAO,IAAIhC,EAAOiC,MAAML,EAASM,WAAYN,EAASO,OAAQP,EAASM,WAAYN,EAASO,QAC5FV,KAAAA,EACAW,kBAAkB,KAE1B9D,KAAK+B,WAAY,EAYrBgC,QAAQb,EAAOc,EAAQb,GACnBnD,KAAK+B,WAAY,EACjB,KAAM,CAAEW,OAAQU,EAAIC,eAAAA,GAAmBrD,KAAKqC,SAC5C,IAAM4B,EAAQb,EAAGG,WAAWC,cAAcN,GACpCgB,EAAMd,EAAGG,WAAWC,cAAcN,EAAQc,GAChDZ,EAAGK,aAAaJ,EAAgB,CAAC,CACzBK,MAAO,IAAIhC,EAAOiC,MAAMM,EAAML,WAAYK,EAAMJ,OAAQK,EAAIN,WAAYM,EAAIL,QAC5EV,KAAAA,EACAW,kBAAkB,KAE1B9D,KAAK+B,WAAY,EAUrBoC,OAAOjB,EAAOc,GACVhE,KAAK+B,WAAY,EACjB,KAAM,CAAEW,OAAQU,EAAIC,eAAAA,GAAmBrD,KAAKqC,SAC5C,IAAM4B,EAAQb,EAAGG,WAAWC,cAAcN,GACpCgB,EAAMd,EAAGG,WAAWC,cAAcN,EAAQc,GAChDZ,EAAGK,aAAaJ,EAAgB,CAAC,CACzBK,MAAO,IAAIhC,EAAOiC,MAAMM,EAAML,WAAYK,EAAMJ,OAAQK,EAAIN,WAAYM,EAAIL,QAC5EV,KAAM,GACNW,kBAAkB,KAE1B9D,KAAK+B,WAAY,EAKrBqC,UACIpE,KAAK+C,UAAUqB,UAUnBjC,eAAeC,GACXT,EAAaa,WAAWC,cAAcL,EAAQ,UAC9C,GAAM,CAAEiC,YAAAA,EAAaC,YAAAA,EAAanB,KAAAA,GAASf,EAC3C,GAAkB,EAAde,EAAKa,QAA8B,IAAhBM,EACnBtE,KAAKqC,SAASO,SAASyB,EAAalB,QAEnC,GAAkB,EAAdA,EAAKa,QAA4B,EAAdM,EACxBtE,KAAKqC,SAASQ,UAAUwB,EAAaC,EAAanB,OAEjD,CAAA,KAAoB,IAAhBA,EAAKa,QAA8B,EAAdM,GAI1B,MAAM,IAAIC,MAAM,sBAAwBC,KAAKC,UAAUrC,IAHvDpC,KAAKqC,SAASS,SAASuB,EAAaC,MAOhDjF,EAAQoC,qBAAuBA,GAMVc,UAAY,CAC7BK,SAAU,OAGVC,UAAW,OAGXC,SAAU,OAGVO,eAAgB,WAMdqB,IACA,CAAE7E,EAAyBR,KAWjCY,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQsF,kBAAe,EAkFvBtF,EAAQsF,mBApEJ/C,YAAYgD,GACR5E,KAAK6E,UAAYD,EAQrBE,QACI,OAAO9E,KAAK6E,UAAUC,QAQ1BC,cACI,OAAO/E,KAAK6E,UAAUE,cAAczB,SAQxC0B,YAAY1B,GACRtD,KAAK6E,UAAUG,YAAY1B,GAQ/B2B,UAAUC,GACNlF,KAAK6E,UAAUI,UAAUC,GAK7BC,OACInF,KAAK6E,UAAUM,OAKnBC,OACIpF,KAAK6E,UAAUO,OASnBC,aACI,OAAOrF,KAAK6E,UAAUQ,aAK1BjB,UACIpE,KAAK6E,UAAUT,aAQjBkB,IACA,CAAEzF,EAAyBR,EAASS,KAW1CG,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQkG,yBAAsB,EAC9B,MAAMC,EAAiB1F,EAAoB,KACrC2F,EAAuB3F,EAAoB,KAC3C6B,EAAe7B,EAAoB,WAOnCyF,EAOF3D,YAAYC,GACR,GAAuB,iBAAZA,EACP,MAAM,IAAI0C,MAAM,4DAIpB,QAAuBhE,KADvBsB,EAAU5B,OAAOqC,OAAOrC,OAAOqC,OAAO,GAAIiD,EAAoBG,iBAAkB7D,IACpEa,QAA2C,OAAnBb,EAAQa,OACxC,MAAM,IAAI6B,MAAM,2CAA2C1C,EAAQa,QAEvE1C,KAAKqC,SAAWR,EAChB7B,KAAK2F,eAAiB,IAAIC,IAC1B5F,KAAK6F,cAAgB,EAezBC,UAAUC,EAAIC,EAAOC,GACjBtE,EAAaa,WAAW0D,aAAaH,EAAI,MACzCpE,EAAaa,WAAW0D,aAAaF,EAAO,SACxChG,KAAKqC,SAAS8D,SAClB,IAAMC,EAAW,GAAKpG,KAAK6F,gBACrBQ,EAAoD,IAAhCrG,KAAKqC,SAASiE,gBAClCC,EAAe,IAAId,EAAqBe,mBAAmBxG,KAAKqC,SAASK,OAAQ0D,EAAUJ,EAAOC,EAAOjG,KAAKqC,SAAS8D,SAAUE,EAAmB,IAAMrG,KAAKyG,aAAaV,IAElL,OADA/F,KAAK2F,eAAee,IAAIX,EAAIQ,GACrB,IAAIf,EAAeb,aAAa4B,GAQ3CE,aAAaV,GACTpE,EAAaa,WAAW0D,aAAaH,EAAI,MACzC,MAAMY,EAAqB3G,KAAK4G,WAAWb,GACtCY,EAAmBtB,cACpBsB,EAAmBvC,UAEvBpE,KAAK2F,eAAexB,OAAO4B,GAW/Bc,kBAAkBd,EAAIzC,GAClB3B,EAAaa,WAAW0D,aAAaH,EAAI,MACzC,MAAMY,EAAqB3G,KAAK4G,WAAWb,GAC3CY,EAAmB3B,YAAY1B,GAWnCwD,gBAAgBf,EAAIb,GAChBvD,EAAaa,WAAW0D,aAAaH,EAAI,MACzC,MAAMY,EAAqB3G,KAAK4G,WAAWb,GAC3CY,EAAmB1B,UAAUC,GAQjC6B,WAAWhB,GACPpE,EAAaa,WAAW0D,aAAaH,EAAI,MACzC,MAAMY,EAAqB3G,KAAK4G,WAAWb,GAC3CY,EAAmBxB,OAQvB6B,WAAWjB,GACPpE,EAAaa,WAAW0D,aAAaH,EAAI,MACzC,MAAMY,EAAqB3G,KAAK4G,WAAWb,GAC3CY,EAAmBvB,OAMvBwB,WAAWb,GACP,GAAK/F,KAAK2F,eAAesB,IAAIlB,GAG7B,OAAO/F,KAAK2F,eAAe7E,IAAIiF,GAF3B,MAAM,IAAIxB,MAAM,mBAAqBwB,KAKjD1G,EAAQkG,oBAAsBA,GAKVG,gBAAkB,CAAES,UAAU,EAAMG,gBAAiB,IAKnEY,IACA,CAAErH,EAAyBR,EAASS,KAW1CG,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQmH,wBAAqB,EAC7B,MAAMW,EAAkBrH,EAAoB,KACtCsH,EAAyBtH,EAAoB,IAC7C6B,EAAe7B,EAAoB,KA2KzCT,EAAQmH,yBA1JJ5E,YAAYyF,EAAYjB,EAAUJ,EAAOC,EAAOqB,EAAgBhB,EAAiBiB,GAC7EvH,KAAKwH,UAAY,CAACtE,EAAOC,KACE,OAAnBnD,KAAKyH,WAILvE,IADEgC,EAASlF,KAAK0H,WAEVC,EAAYzC,EAAS/B,EAAKa,OAC1BV,EAAWtD,KAAK4H,QAAQrE,WAAWC,cAAcmE,GACvD3H,KAAK6H,gBAAgBvE,KAG7BtD,KAAK8H,WAAa,CAAC5E,EAAOc,EAAQb,KAC9B,IAKUwE,EALa,OAAnB3H,KAAKyH,WAILvE,IADEgC,EAASlF,KAAK0H,WAEVC,EAAazC,EAAS6C,KAAKC,IAAI9C,EAAShC,EAAOc,GAAWb,EAAKa,OAC/DV,EAAWtD,KAAK4H,QAAQrE,WAAWC,cAAcmE,GACvD3H,KAAK6H,gBAAgBvE,KAG7BtD,KAAKiI,UAAY,CAAC/E,EAAOc,KACrB,IAKU2D,EALa,OAAnB3H,KAAKyH,WAILvE,IADEgC,EAASlF,KAAK0H,WAEVC,EAAYzC,EAAS6C,KAAKC,IAAI9C,EAAShC,EAAOc,GAC9CV,EAAWtD,KAAK4H,QAAQrE,WAAWC,cAAcmE,GACvD3H,KAAK6H,gBAAgBvE,KAG7BtD,KAAK4H,QAAUP,EACfrH,KAAKkI,iBAAmB5B,EACxBtG,KAAKmI,IAAM,wBAAwB/B,EACnCpG,KAAKoI,YAAcb,EAEXc,GArDmC,mBAFzBC,EAuDsBtI,KAAK4H,SArDvBW,iBACfD,EAAeC,mBAEnB,CACHF,WAAYC,EAAeE,UAAUrB,EAAgBzE,OAAO+F,aAAaJ,cAiDtD,WACnBrI,KAAK0I,SAAWC,SAASC,cAAc,OACvC5I,KAAK0I,SAASG,UAAY,uBAC1B7I,KAAK0I,SAASI,MAAMC,WAAa/C,EACjChG,KAAK0I,SAASI,MAAME,OAAYX,EAAH,KAEzBf,GACAtH,KAAKiJ,aAAeN,SAASC,cAAc,OAC3C5I,KAAKiJ,aAAaJ,UAAY,+BAC9B7I,KAAKiJ,aAAaH,MAAMC,WAAa/C,EACrChG,KAAKiJ,aAAaC,UAAYjD,EAC9BjG,KAAK0I,SAASS,YAAYnJ,KAAKiJ,cAG/BjJ,KAAKoJ,gBAAkBpJ,KAAK4H,QAAQyB,kBAAkB,KAClDrJ,KAAKsJ,6BAITtJ,KAAKiJ,aAAe,KACpBjJ,KAAKoJ,gBAAkB,MAE3BpJ,KAAKuJ,gBAAkB,IAAInC,EAAuB3F,qBAAqB,CACnEiB,OAAQ1C,KAAK4H,QACbhF,SAAU5C,KAAKwH,UACf3E,UAAW7C,KAAK8H,WAChBhF,SAAU9C,KAAKiI,YAEnBjI,KAAKwJ,WAAa,KAClBxJ,KAAK4H,QAAQ6B,iBAAiBzJ,MAC9BA,KAAK0H,SAAW,EAChB1H,KAAK0J,WAAY,EAErBtE,OACIpF,KAAK0I,SAASI,MAAMa,QAAU,OAElCxE,OACInF,KAAK0I,SAASI,MAAMa,QAAU,UAElC1E,UAAUC,GACNvD,EAAaa,WAAWoH,aAAa1E,EAAQ,UACvC5B,EAAWtD,KAAK4H,QAAQrE,WAAWC,cAAc0B,GACvDlF,KAAKgF,YAAY1B,GAErB0B,YAAY1B,GACR3B,EAAaa,WAAWqH,eAAevG,EAAU,YACjDtD,KAAK6H,gBAAgBvE,GACK,OAAtBtD,KAAKiJ,cACLa,WAAW,IAAM9J,KAAK+J,eAAgB,GAG9C1E,aACI,OAAOrF,KAAK0J,UAEhBtF,UACQpE,KAAK0J,YAGT1J,KAAK4H,QAAQoC,oBAAoBhK,MACJ,OAAzBA,KAAKoJ,iBACLpJ,KAAKoJ,gBAAgBhF,UAEzBpE,KAAKuJ,gBAAgBnF,UACrBpE,KAAK0J,WAAY,EACjB1J,KAAKoI,eAETtD,QACI,OAAO9E,KAAKmI,IAEhB8B,aACI,OAAOjK,KAAK0I,SAEhB3D,cACI,OAAO/E,KAAKyH,UAEhBI,gBAAgBvE,GACZtD,KAAKyH,UAAY,CACbnE,SAAUrD,OAAOqC,OAAO,GAAIgB,GAC5B4G,WAAY,CAAC/C,EAAgBzE,OAAOyH,gCAAgCC,QAExEpK,KAAK0H,QAAU1H,KAAK4H,QAAQrE,WAAW8G,YAAY/G,GACnDtD,KAAK4H,QAAQ0C,oBAAoBtK,MAErC+J,eACI/J,KAAKsJ,yBACmB,OAApBtJ,KAAKwJ,WACLe,aAAavK,KAAKwJ,YAGlBxJ,KAAKwK,oBAAmB,GAE5BxK,KAAKwJ,WAAaM,WAAW,KACzB9J,KAAKwK,oBAAmB,GACxBxK,KAAKwJ,WAAa,MACnBxJ,KAAKkI,kBAEZoB,yBAC4BtJ,KAAK0I,SAAS+B,UAAYzK,KAAK4H,QAAQ8C,eACzC1K,KAAKiJ,aAAa0B,aAAe,EACnD3K,KAAKiJ,aAAaH,MAAM8B,IAAS5K,KAAKiJ,aAAa0B,aAAe,EAApC,KAG9B3K,KAAKiJ,aAAaH,MAAM8B,QAAU5K,KAAKiJ,aAAa0B,iBAExD3K,KAAKiJ,aAAaH,MAAM+B,KAAO,IAEnCL,mBAAmBM,GAEX9K,KAAKiJ,aAAaH,MAAMiC,QADxBD,EACkC,MAGA,OASxCE,IACA,SAAUnL,EAAyBR,EAASS,GAWlD,IAAIC,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B,IAAIG,EAAOP,OAAOQ,yBAAyBL,EAAGC,GACzCG,IAAS,QAASA,EAAQJ,EAAEM,YAAaF,EAAKG,WAAYH,EAAKI,gBAClEJ,EAAO,CAAEK,YAAY,EAAMC,IAAK,WAAa,OAAOV,EAAEC,MAExDJ,OAAOc,eAAeZ,EAAGG,EAAIE,IAC5B,SAAUL,EAAGC,EAAGC,EAAGC,GAEpBH,EADsBG,OAAXC,IAAPD,EAAuBD,EACzBC,GAAMF,EAAEC,KAEVW,EAAsBhB,MAAQA,KAAKgB,qBAAwBf,OAAOC,OAAS,SAAUC,EAAGc,GACxFhB,OAAOc,eAAeZ,EAAG,UAAW,CAAEU,YAAY,EAAMK,MAAOD,KAC9D,SAASd,EAAGc,GACbd,EAAW,QAAIc,IAEfE,EAAgBnB,MAAQA,KAAKmB,cAAiB,SAAUC,GACxD,GAAIA,GAAOA,EAAIV,WAAY,OAAOU,EAClC,IAAIC,EAAS,GACb,GAAW,MAAPD,EAAa,IAAK,IAAIf,KAAKe,EAAe,YAANf,GAAmBJ,OAAOqB,UAAUC,eAAeC,KAAKJ,EAAKf,IAAIN,EAAgBsB,EAAQD,EAAKf,GAEtI,OADAW,EAAmBK,EAAQD,GACpBC,GAEXpB,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQ4L,qBAAkB,EAC1B,MAAMvJ,EAASP,EAAarB,EAAoB,MAC1C6B,EAAe7B,EAAoB,WACnCmL,EAMFrJ,YAAYyF,EAAYtB,EAAImF,EAASlF,EAAOC,EAAOsB,GAC/CvH,KAAK4H,QAAUP,EACfrH,KAAKmI,IAAMpC,EACLoF,EAAgB,2BAA2BD,EACjDlL,KAAKoL,WAAa,2BAA2BD,EAC7CnL,KAAKqL,cAAgBJ,EAAgBK,wBAAwBH,EAAenF,GAC5EhG,KAAKuL,OAAStF,EACdjG,KAAKwL,aAAe,GACpBxL,KAAKoI,YAAcb,EAkBvB+D,+BAA+BzC,EAAW7C,GACtCrE,EAAaa,WAAW0D,aAAa2C,EAAW,aAChDlH,EAAaa,WAAW0D,aAAaF,EAAO,SACtCyF,MAAU5C;6BACK7C;UACnB0F,OACF,MAAMC,EAAehD,SAASC,cAAc,SAG5C,OAFA+C,EAAaC,UAAYH,EACzB9C,SAASkD,KAAK1C,YAAYwC,GACnBA,EAeXG,qBAAqB7H,EAAOC,GACxB,OAAID,EAAML,WAAaM,EAAIN,YAAeK,EAAML,aAAeM,EAAIN,YAAcK,EAAMJ,QAAUK,EAAIL,OAC1F,CAAEI,MAAAA,EAAOC,IAAAA,GAGT,CAAED,MAAOC,EAAKA,IAAKD,GAMlCa,QACI,OAAO9E,KAAKmI,IAQhB4D,mBACI,OAAO9L,OAAOqC,OAAO,GAAItC,KAAKgM,gBAQlCC,iBACI,OAAOhM,OAAOqC,OAAO,GAAItC,KAAKkM,cAUlCC,WAAWlI,EAAOC,GACRkI,EAAgBpM,KAAK4H,QAAQrE,WAAWC,cAAcS,GACtDoI,EAAcrM,KAAK4H,QAAQrE,WAAWC,cAAcU,GAC1DlE,KAAKsM,aAAaF,EAAeC,GAUrCC,aAAarI,EAAOC,GAEVqI,EAAUtB,EAAgBa,cAAc7H,EAAOC,GACrDlE,KAAKgM,eAAiBO,EAAQtI,MAC9BjE,KAAKkM,aAAeK,EAAQrI,IAC5BlE,KAAKwM,UAKTrH,OACInF,KAAKwM,UAKTpH,OACIpF,KAAKwL,aAAexL,KAAK4H,QAAQ6E,iBAAiBzM,KAAKwL,aAAc,IAQzEnG,aACI,OAAOrF,KAAK0J,UAKhBtF,UACSpE,KAAK0J,YACN1J,KAAKqL,cAAcqB,cAAcC,YAAY3M,KAAKqL,eAClDrL,KAAKoF,OACLpF,KAAK0J,WAAY,EACjB1J,KAAKoI,eAUboE,UACIxM,KAAKwL,aAAexL,KAAK4H,QAAQ6E,iBAAiBzM,KAAKwL,aAAc,CACjE,CACI9H,MAAO,IAAIhC,EAAOiC,MAAM3D,KAAKgM,eAAepI,WAAY5D,KAAKgM,eAAenI,OAAQ7D,KAAKkM,aAAatI,WAAY5D,KAAKkM,aAAarI,QACpIhC,QAAS,CACLgH,UAAW7I,KAAKoL,WAChBwB,aAA6B,MAAf5M,KAAKuL,OAAiB,CAChCrK,MAAOlB,KAAKuL,QACZ,UAMxBlM,EAAQ4L,gBAAkBA,GAKpB4B,IACA,CAAEhN,EAAyBR,EAASS,KAW1CG,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQyN,4BAAyB,EACjC,MAAMC,EAAoBjN,EAAoB,KACxC6B,EAAe7B,EAAoB,KA0GzCT,EAAQyN,6BA9FJlL,YAAYC,GACRF,EAAaa,WAAWC,cAAcZ,EAAS,WAC/C7B,KAAKgN,kBAAoB,IAAIpH,IAC7B5F,KAAKqC,SAAWR,EAChB7B,KAAKiN,aAAe,EAUxBC,aAAanH,EAAIC,EAAOC,GAIdkH,EAAY,IAAIJ,EAAkB9B,gBAAgBjL,KAAKqC,SAASK,OAAQqD,EAAI/F,KAAKiN,eAAgBjH,EAAOC,EAH3F,KACfjG,KAAKoN,gBAAgBrH,KAIzB,OADA/F,KAAKgN,kBAAkBtG,IAAIX,EAAIoH,GACxBA,EAQXC,gBAAgBrH,GACZ,MAAMsH,EAAkBrN,KAAKsN,cAAcvH,GACtCsH,EAAgBhI,cACjBgI,EAAgBjJ,UAaxBmJ,oBAAoBxH,EAAI9B,EAAOC,GAC3B,MAAMmJ,EAAkBrN,KAAKsN,cAAcvH,GAC3CsH,EAAgBlB,WAAWlI,EAAOC,GAatCsJ,sBAAsBzH,EAAI9B,EAAOC,GAC7B,MAAMmJ,EAAkBrN,KAAKsN,cAAcvH,GAC3CsH,EAAgBf,aAAarI,EAAOC,GAQxCuJ,cAAc1H,GACV,MAAMsH,EAAkBrN,KAAKsN,cAAcvH,GAC3CsH,EAAgBlI,OAQpBuI,cAAc3H,GACV,MAAMsH,EAAkBrN,KAAKsN,cAAcvH,GAC3CsH,EAAgBjI,OAMpBkI,cAAcvH,GACV,GAAK/F,KAAKgN,kBAAkB/F,IAAIlB,GAGhC,OAAO/F,KAAKgN,kBAAkBlM,IAAIiF,GAF9B,MAAM,IAAIxB,MAAM,sBAAwBwB,MAU9C4H,IACA,CAAE9N,EAAyBR,KAWjCY,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD7B,EAAQmD,gBAAa,QAMfA,EACF0D,oBAAoB0H,EAAKC,GACrB,GAAmB,iBAARD,EACP,MAAM,IAAIrJ,MAASsJ,EAAH,8BAAqCD,GAG7DhE,oBAAoBgE,EAAKC,GACrB,GAAmB,iBAARD,EACP,MAAM,IAAIrJ,MAASsJ,EAAH,8BAAqCD,GAG7DnL,qBAAqBmL,EAAKC,GACtB,GAAID,MAAAA,EACA,MAAM,IAAIrJ,MAASsJ,EAAH,+BAAsCD,GAG9DjL,sBAAsBiL,EAAKC,GACvB,GAAmB,mBAARD,EACP,MAAM,IAAIrJ,MAASsJ,EAAH,uCAA8CD,GAGtE/D,sBAAsB+D,EAAKC,GAEvB,GADArL,EAAWC,cAAcmL,EAAKC,GACA,iBAAnBD,EAAIhK,YAAiD,iBAAfgK,EAAI/J,OACjD,MAAM,IAAIU,MAASsJ,EAAH,iEAAwErJ,KAAKC,UAAUmJ,KAInHvO,EAAQmD,WAAaA,GAKfsL,IACA,SAAUjO,EAAyBR,EAASS,GAWlD,IAAIC,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B,IAAIG,EAAOP,OAAOQ,yBAAyBL,EAAGC,GACzCG,IAAS,QAASA,EAAQJ,EAAEM,YAAaF,EAAKG,WAAYH,EAAKI,gBAClEJ,EAAO,CAAEK,YAAY,EAAMC,IAAK,WAAa,OAAOV,EAAEC,MAExDJ,OAAOc,eAAeZ,EAAGG,EAAIE,IAC5B,SAAUL,EAAGC,EAAGC,EAAGC,GAEpBH,EADsBG,OAAXC,IAAPD,EAAuBD,EACzBC,GAAMF,EAAEC,KAEV0N,EAAgB/N,MAAQA,KAAK+N,cAAiB,SAAS3N,EAAGf,GAC1D,IAAK,IAAI2O,KAAK5N,EAAa,YAAN4N,GAAoB/N,OAAOqB,UAAUC,eAAeC,KAAKnC,EAAS2O,IAAIjO,EAAgBV,EAASe,EAAG4N,IAE3H/N,OAAOc,eAAe1B,EAAS,aAAc,CAAG6B,OAAO,IACvD6M,EAAajO,EAAoB,KAAMT,GACvC0O,EAAajO,EAAoB,KAAMT,GACvC0O,EAAajO,EAAoB,IAAKT,IAKhC4O,IACC,IAEP3O,EAAOD,QAAU6O,IAOHC,EAA2B,GA8B/B,OA3BA,SAASrO,EAAoBsO,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqB7N,IAAjB8N,EACH,OAAOA,EAAahP,QAGjBC,EAAS6O,EAAyBC,GAAY,CAGjD/O,QAAS,IAOV,OAHAM,EAAoByO,GAAU5M,KAAKlC,EAAOD,QAASC,EAAQA,EAAOD,QAASS,GAGpER,EAAOD,QAQWS,CAAoB,MAxkCxC"}